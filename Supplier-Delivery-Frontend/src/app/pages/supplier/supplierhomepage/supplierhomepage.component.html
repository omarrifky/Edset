<Navbar></Navbar>
<div class="holder">
  <div class="tabs">
    <button (click)="changeTable('all')" [ngClass]="{'active': selectedTable=='all'}">View My orders</button>

    <button (click)="changeTable('previous')" [ngClass]="{'active': selectedTable=='previous'}">View previous
      orders</button>
    <button (click)="changeTable('myProducts')" [ngClass]="{'active': selectedTable=='myProducts'}">View My
      Products</button>
    <button (click)="createProduct()">Create Product</button>
  </div>
  <div>
    <h1>{{ titles[selectedTable] }}</h1>
    <div class="main_table">
      <table class="table align-middle mb-0 bg-white">
        <thead class="bg-light">
          <tr>
            <th>OrderID</th>
            <th>Client</th>

            <th>
              <div class="product_details">
                <p>Product Name</p>
                <p>Product Quantity</p>
                <p>Product Price</p>
                <p>Product Status</p>
              </div>
            </th>
            <th>Total Price</th>
            <th *ngIf="selectedTable != 'previous'">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of orders">
            <td>
              <p class="fw-normal mb-1">{{order.ordernumber}}</p>
            </td>
            <td>
              <p class="fw-bold mb-1">{{order?.user?.firstname}} {{order?.user?.lastname}}</p>
              <a class="fw-bold mb-1" href="tel:{{order?.user?.mobileNumber}}">Mob: {{order?.user?.mobileNumber}}</a>
            </td>
            <td class="split">
              <div class="product_details"
                *ngFor="let product of order.products">
                <p>{{product.product.productName}}</p>
                <p>{{product.quantity}}</p>
                <p>{{product.priceatPurchase | currency:'EGP ':'symbol':'.2-2'}}</p>
                <p [class]="'edset_badge ' + product.status">{{mappedStatus[product.status] || product.status}}</p>
              </div>
            </td>
            <td>
              <p>{{(order.totalPrice) | currency:'EGP ':'symbol':'.2-2'}}</p>
            </td>
            <td>
              <div class="actions" *ngIf="selectedTable != 'previous'">
                <button type="button" (click)="changeOrderStatus(order._id)" class="edset_button">
                  {{actions[selectedTable]}}
                </button>
              </div>
            </td>

          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>